---
- name: Create ACI Services Schema
  hosts: localhost
  connection: local
  gather_facts: no
  vars_files:
    - schema.yml
  vars:
    apic_host: sandboxapicdc.cisco.com
    username: admin
    password: '!v3G@!4@Y'
    validate_certs: no

  tasks:

    - name: Display tenants
      ansible.builtin.debug:
        msg: |
          {% for item in aci_services | map(attribute='tenant') | unique %}
          {{ item }}
          {% endfor %}

    - name: dict test
      ansible.builtin.debug:
        msg: "{{ item.vrf }}, {{ item.tenant }}"
      loop: "{{ aci_services | unique(attribute='vrf') }}"

    - name: dict test 2
      ansible.builtin.debug:
        msg: "{{ item.tenant }}"
      loop: "{{ aci_services | unique(attribute='tenant') }}"